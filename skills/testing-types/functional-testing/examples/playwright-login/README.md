# Playwright ç™»å½•åŠŸèƒ½æµ‹è¯•ç¤ºä¾‹

è¿™æ˜¯ä¸€ä¸ªå®Œæ•´çš„ Playwright æµ‹è¯•ç¤ºä¾‹ï¼Œæ¼”ç¤ºå¦‚ä½•æµ‹è¯•ç”¨æˆ·ç™»å½•åŠŸèƒ½ã€‚

## ğŸ“‹ æµ‹è¯•è¦†ç›–

### åŠŸèƒ½æµ‹è¯•
- âœ… æ­£å¸¸ç™»å½•æµç¨‹
- âœ… æ— æ•ˆå‡­æ®å¤„ç†
- âœ… ç©ºå­—æ®µéªŒè¯
- âœ… è®°ä½æˆ‘åŠŸèƒ½
- âœ… å¯†ç å¯è§æ€§åˆ‡æ¢
- âœ… åŠ è½½çŠ¶æ€æ˜¾ç¤º
- âœ… é”®ç›˜å¯¼èˆª

### å¯è®¿é—®æ€§æµ‹è¯•
- âœ… ARIA æ ‡ç­¾éªŒè¯
- âœ… é”®ç›˜ç„¦ç‚¹é¡ºåº

### å®‰å…¨æ€§æµ‹è¯•
- âœ… è´¦æˆ·é”å®šæœºåˆ¶
- âœ… SQL æ³¨å…¥é˜²æŠ¤

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. å®‰è£…ä¾èµ–

```bash
npm install
```

### 2. è¿è¡Œæµ‹è¯•

```bash
# æ— å¤´æ¨¡å¼è¿è¡Œæ‰€æœ‰æµ‹è¯•
npm test

# æœ‰å¤´æ¨¡å¼è¿è¡Œï¼ˆå¯ä»¥çœ‹åˆ°æµè§ˆå™¨ï¼‰
npm run test:headed

# è°ƒè¯•æ¨¡å¼
npm run test:debug

# UI æ¨¡å¼ï¼ˆæ¨èï¼‰
npm run test:ui
```

### 3. æŸ¥çœ‹æµ‹è¯•æŠ¥å‘Š

```bash
npm run report
```

## ğŸ“ é¡¹ç›®ç»“æ„

```
playwright-login/
â”œâ”€â”€ package.json           # é¡¹ç›®é…ç½®å’Œä¾èµ–
â”œâ”€â”€ playwright.config.ts   # Playwright é…ç½®
â”œâ”€â”€ tests/
â”‚   â””â”€â”€ login.spec.ts      # ç™»å½•æµ‹è¯•ç”¨ä¾‹
â””â”€â”€ README.md              # æœ¬æ–‡æ¡£
```

## ğŸ¯ æµ‹è¯•ç”¨ä¾‹è¯´æ˜

### TC-001: ä½¿ç”¨æœ‰æ•ˆå‡­æ®æˆåŠŸç™»å½•
**ç›®çš„**: éªŒè¯æ­£å¸¸ç™»å½•æµç¨‹  
**æ­¥éª¤**:
1. è¾“å…¥æœ‰æ•ˆç”¨æˆ·å
2. è¾“å…¥æœ‰æ•ˆå¯†ç 
3. ç‚¹å‡»ç™»å½•æŒ‰é’®

**é¢„æœŸç»“æœ**:
- è·³è½¬åˆ°ä»ªè¡¨æ¿é¡µé¢
- æ˜¾ç¤ºæ¬¢è¿æ¶ˆæ¯
- æ˜¾ç¤ºç”¨æˆ·å¤´åƒ
- æ˜¾ç¤ºç™»å‡ºæŒ‰é’®

### TC-002: ä½¿ç”¨æ— æ•ˆç”¨æˆ·åç™»å½•å¤±è´¥
**ç›®çš„**: éªŒè¯æ— æ•ˆç”¨æˆ·åçš„é”™è¯¯å¤„ç†  
**é¢„æœŸç»“æœ**:
- æ˜¾ç¤ºé”™è¯¯æ¶ˆæ¯
- ä¿æŒåœ¨ç™»å½•é¡µé¢
- è¾“å…¥æ¡†ä¿æŒå¯ç¼–è¾‘

### TC-003: ä½¿ç”¨é”™è¯¯å¯†ç ç™»å½•å¤±è´¥
**ç›®çš„**: éªŒè¯é”™è¯¯å¯†ç çš„å¤„ç†  
**é¢„æœŸç»“æœ**:
- æ˜¾ç¤ºé”™è¯¯æ¶ˆæ¯
- å¯†ç æ¡†è¢«æ¸…ç©ºï¼ˆå®‰å…¨æœ€ä½³å®è·µï¼‰

### TC-004-006: ç©ºå­—æ®µéªŒè¯
**ç›®çš„**: éªŒè¯å®¢æˆ·ç«¯è¡¨å•éªŒè¯  
**é¢„æœŸç»“æœ**:
- æ˜¾ç¤ºç›¸åº”çš„é”™è¯¯æç¤º
- å­—æ®µæ ‡è®°ä¸ºæ— æ•ˆçŠ¶æ€
- ç™»å½•æŒ‰é’®ä¿æŒç¦ç”¨

### TC-007: è®°ä½æˆ‘åŠŸèƒ½
**ç›®çš„**: éªŒè¯æŒä¹…åŒ–ç™»å½•  
**é¢„æœŸç»“æœ**:
- è®¾ç½®é•¿æœŸæœ‰æ•ˆçš„ Cookie
- ä¸‹æ¬¡è®¿é—®è‡ªåŠ¨ç™»å½•

### TC-008: å¯†ç å¯è§æ€§åˆ‡æ¢
**ç›®çš„**: éªŒè¯å¯†ç æ˜¾ç¤º/éšè—åŠŸèƒ½  
**é¢„æœŸç»“æœ**:
- å¯ä»¥åˆ‡æ¢å¯†ç çš„å¯è§æ€§
- å¯†ç å€¼ä¿æŒä¸å˜

### TC-009: ç™»å½•æŒ‰é’®åŠ è½½çŠ¶æ€
**ç›®çš„**: éªŒè¯ç”¨æˆ·åé¦ˆ  
**é¢„æœŸç»“æœ**:
- æŒ‰é’®æ˜¾ç¤ºåŠ è½½çŠ¶æ€
- æŒ‰é’®è¢«ç¦ç”¨é˜²æ­¢é‡å¤æäº¤
- æ˜¾ç¤ºåŠ è½½åŠ¨ç”»

### TC-010: é”®ç›˜å¯¼èˆª
**ç›®çš„**: éªŒè¯é”®ç›˜å¯è®¿é—®æ€§  
**é¢„æœŸç»“æœ**:
- Enter é”®å¯ä»¥æäº¤è¡¨å•

### TC-011-012: å¯è®¿é—®æ€§æµ‹è¯•
**ç›®çš„**: éªŒè¯ WCAG åˆè§„æ€§  
**é¢„æœŸç»“æœ**:
- æ‰€æœ‰è¡¨å•å…ƒç´ æœ‰æ­£ç¡®çš„ ARIA æ ‡ç­¾
- é”®ç›˜ç„¦ç‚¹é¡ºåºç¬¦åˆé€»è¾‘

### TC-013: è´¦æˆ·é”å®šæœºåˆ¶
**ç›®çš„**: éªŒè¯å®‰å…¨é˜²æŠ¤  
**é¢„æœŸç»“æœ**:
- å¤šæ¬¡å¤±è´¥åé”å®šè´¦æˆ·
- æ˜¾ç¤ºé”å®šæç¤º

### TC-014: SQL æ³¨å…¥é˜²æŠ¤
**ç›®çš„**: éªŒè¯å®‰å…¨æ€§  
**é¢„æœŸç»“æœ**:
- SQL æ³¨å…¥å°è¯•è¢«é˜»æ­¢
- è¿”å›æ­£å¸¸çš„é”™è¯¯æ¶ˆæ¯

## ğŸ”§ é…ç½®è¯´æ˜

### playwright.config.ts

```typescript
import { defineConfig, devices } from '@playwright/test';

export default defineConfig({
  testDir: './tests',
  fullyParallel: true,
  forbidOnly: !!process.env.CI,
  retries: process.env.CI ? 2 : 0,
  workers: process.env.CI ? 1 : undefined,
  reporter: 'html',
  use: {
    baseURL: 'https://demo.playwright.dev',
    trace: 'on-first-retry',
    screenshot: 'only-on-failure',
  },
  projects: [
    {
      name: 'chromium',
      use: { ...devices['Desktop Chrome'] },
    },
    {
      name: 'firefox',
      use: { ...devices['Desktop Firefox'] },
    },
    {
      name: 'webkit',
      use: { ...devices['Desktop Safari'] },
    },
  ],
});
```

## ğŸ“ æœ€ä½³å®è·µ

### 1. ä½¿ç”¨ data-testid å®šä½å…ƒç´ 
```typescript
// âœ… æ¨è
await page.click('[data-testid="login-button"]');

// âŒ ä¸æ¨èï¼ˆå®¹æ˜“å›  UI å˜åŒ–è€Œå¤±æ•ˆï¼‰
await page.click('.btn-primary');
```

### 2. ä½¿ç”¨æœ‰æ„ä¹‰çš„æµ‹è¯•æè¿°
```typescript
// âœ… æ¸…æ™°çš„æè¿°
test('TC-001: ä½¿ç”¨æœ‰æ•ˆå‡­æ®æˆåŠŸç™»å½•', async ({ page }) => {});

// âŒ æ¨¡ç³Šçš„æè¿°
test('test login', async ({ page }) => {});
```

### 3. ç‹¬ç«‹çš„æµ‹è¯•ç”¨ä¾‹
```typescript
// âœ… æ¯ä¸ªæµ‹è¯•ç‹¬ç«‹
test.beforeEach(async ({ page }) => {
  await page.goto('/login');
});

// âŒ æµ‹è¯•ä¹‹é—´æœ‰ä¾èµ–
```

### 4. æ˜ç¡®çš„æ–­è¨€
```typescript
// âœ… å¤šä¸ªå…·ä½“çš„æ–­è¨€
await expect(page).toHaveURL(/.*dashboard/);
await expect(page.locator('.welcome')).toContainText('æ¬¢è¿');

// âŒ å•ä¸€æ¨¡ç³Šçš„æ–­è¨€
await expect(page.locator('.container')).toBeVisible();
```

### 5. ç­‰å¾…ç­–ç•¥
```typescript
// âœ… ä½¿ç”¨ Playwright çš„è‡ªåŠ¨ç­‰å¾…
await expect(page.locator('.message')).toBeVisible();

// âŒ ä½¿ç”¨å›ºå®šå»¶è¿Ÿ
await page.waitForTimeout(3000);
```

## ğŸ› æ•…éšœæ’é™¤

### é—®é¢˜1: æµ‹è¯•è¶…æ—¶

**åŸå› **: å…ƒç´ åŠ è½½æ…¢æˆ–å®šä½å™¨ä¸æ­£ç¡®

**è§£å†³æ–¹æ¡ˆ**:
```typescript
// å¢åŠ è¶…æ—¶æ—¶é—´
await expect(page.locator('.slow-element')).toBeVisible({ timeout: 10000 });

// æˆ–æ£€æŸ¥å®šä½å™¨æ˜¯å¦æ­£ç¡®
```

### é—®é¢˜2: æµ‹è¯•ä¸ç¨³å®š

**åŸå› **: ç½‘ç»œå»¶è¿Ÿæˆ–å¼‚æ­¥æ“ä½œ

**è§£å†³æ–¹æ¡ˆ**:
```typescript
// ç­‰å¾…ç½‘ç»œè¯·æ±‚å®Œæˆ
await page.waitForResponse(resp => resp.url().includes('/api/login'));

// ç­‰å¾…ç‰¹å®šçŠ¶æ€
await page.waitForLoadState('networkidle');
```

### é—®é¢˜3: æ— æ³•æ‰¾åˆ°å…ƒç´ 

**åŸå› **: å…ƒç´ åœ¨ iframe ä¸­æˆ–åŠ¨æ€åŠ è½½

**è§£å†³æ–¹æ¡ˆ**:
```typescript
// å¤„ç† iframe
const frame = page.frameLocator('iframe[name="login-frame"]');
await frame.locator('[data-testid="username"]').fill('user');

// ç­‰å¾…å…ƒç´ å‡ºç°
await page.waitForSelector('[data-testid="username"]');
```

## ğŸ“š ç›¸å…³èµ„æº

- [Playwright å®˜æ–¹æ–‡æ¡£](https://playwright.dev/)
- [Playwright æœ€ä½³å®è·µ](https://playwright.dev/docs/best-practices)
- [æµ‹è¯•é€‰æ‹©å™¨ç­–ç•¥](https://playwright.dev/docs/selectors)
- [è°ƒè¯•æµ‹è¯•](https://playwright.dev/docs/debug)

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

## ğŸ“„ è®¸å¯è¯

MIT License
